Bootstrap: docker
From: ubuntu:16.04

%labels
Maintainer Matthew Flister
Version 4.10.4p02

%help
This container runs Geant4.

%environment

%post
    # default mount points
    mkdir -p /scratch/global /scratch/local /rcc/stor1/refdata /rcc/stor1/projects /rcc/stor1/depts
    
    # Install necessary packages
    apt-get update && apt-get install -y --no-install-recommends \
        build-essential \
        gcc-multilib \
        cmake \
        wget
    apt-get clean

    # install geant4
    wget -q -O- https://github.com/Geant4/geant4/archive/v10.4.2.tar.gz | tar -xvf -C geant4-src
    mkdir -p geant4-src/geant4-build && cd geant4-src/geant4-build
    cmake .. -DCMAKE_INSTALL_PREFIX=/opt/geant4 -DGEANT4_INSTALL_DATA=ON
    make && make install 
    cd ~/ && rm -rf geant4-src

